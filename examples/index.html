<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>validate examples</title>
    <script src="../bower_components/jquery/dist/jquery.js"></script>
    <script src="../bower_components/class/index.js"></script>
    <link rel="stylesheet" type="text/css" href="../index.css" />
    <script src="../rms.js"></script>
    <script src="../index.js"></script>
    <style>
    a{
        margin: 20px;
    }
    </style>
</head>

<body>
<form id="form">
    <input type="text" name="username" data-rule='{required: true}' data-msg="{required: ['字段正确', '']}" />
    <input type="password" name="password" />
</form>

<script>
// $('#form').validate({
//     rules: {
//         password: {
//             remote: {
//                 type: 'jsonp',
//                 url: 'http://member.pinganfang.com/v2/api/web/user/letter/getLetterNum?callback=jQuery1124030841735366343626_1488786371163&_=1488786371164',
//                 error: function(xhr){
//                     // console.log(xhr);
//                     // xhr.resolve('1333');
//                 }
//             }
//         }
//     }
// }).validate('check');

function a(status, error){
    var defer = $.Deferred();
    status ? defer.resolve('1233') : defer.reject(error);
    return defer.promise();
}

// a(true).done(function(){
//     console.log('done');
// }).done(function(){
//     console.log('done');
// }).always(function(){
//     console.log('always');
// }).always(function(){
//     console.log('fdjkfd');
// }).then(function(){
//     return a(true).done(function(){
//         console.log('inline done');
//     })
// })
// 
// 
// 
var defer = $.Deferred();
defer.promise().then(function(){
    console.log(3333);
});

defer.resolve('1111');


// a(true).then(function(){
//     console.log(1);
//     return a(true).then(function(){
//         console.log(2);
//         return a(true).then(function(){
//             console.log(4);
//         })
//     })
// }).then(function(){
//     console.log(3);
// })

// $.when(a(true), a(false, '1'), a(false, '2')).then(function(){
//     console.log('pass', arguments);
// }, function(){
//     console.log(1233);
//     console.log('error', arguments);
// }).always(function(){
//     console.log('always', arguments);
// })

</script>
</body>
</html>